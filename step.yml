title: |-
  Qyrus App Automate
summary: Upload an app to Qyrus and run tests.
description: |
  This step uploads a provided app apk/ipa to Qyrus. It then will execute the tests for the provided apks/ipas in Qyrus. 
  Qyrus is a end to end testing platform designed to test Web, Mobile and APIs for all digital enterprises. With its codeless approach to testing Web, Mobile & APIs, Qyrus is the fastest way to start the journey of automated testing for your enterprise.
website: https://github.com/QQyrus/bitrise-step-qyrus-mobility-test-runner-android
source_code_url: https://github.com/QQyrus/bitrise-step-qyrus-mobility-test-runner-android
support_url: https://github.com/QQyrus/bitrise-step-qyrus-mobility-test-runner-android/issues
host_os_tags:
  - osx-10.10
  - ubuntu-16.04

type_tags:
  - test

is_requires_admin_user: true
is_always_run: false
is_skippable: false
run_if: ""

deps:
  brew:
  - name: node
  apt_get:
  - name: nodejs

toolkit:
  bash:
    entry_file: step.sh

inputs:
  # All parameters required to run test on Qyrus Cloud
  - enable_debug: "no"
    opts:
      title: "Debug mode"
      description: |
        Step prints additional debug information if this option
        is enabled
      is_required: true
      value_options:
        - "yes"
        - "no"
  - upload_app: "no"
    opts:
      title: "Upload app"
      description: |
        If you just want to run tests without upload app
        change the option to no.
      is_required: true
      value_options:
        - "yes"
        - "no"
  - gateway_url:
    opts:
      title: "Gateway URL"
      summary: Qyrus provided gateway url
      description: |
        Enter the url of the gateway which is provided by Qyrus else
        contact support@qyrus.com
      is_required: true
  - upload_path:
    opts:  
      description: |
        This usually gets generated by the the "Gradle Runner" or "XCode Archive & Export" step
      is_required: true
      summary:
        The app file you want to upload to Qyrus, usually $BITRISE\_APK\_PATH
        or $BITRISE\_IPA\_PATH
      title: A Bitrise generated APK or IPA path
  - qyrus_username:
    opts:
      title: "Qyrus Username"
      summary: Your Qyrus devops username
      description: |
        The username used to run devops tasks on Qyrus.
      is_required: true
  - qyrus_password:
    opts:
      title: "Qyrus Password"
      summary: Your Qyrus devops password
      description: |
        The password used to run devops tasks on Qyrus.
      is_required: true
      is_sensitive: true
  - qyrus_team_name:
    opts:
      title: "Qyrus Team Name"
      summary: Enter the team name
      description: |
        Team name you can find by logging into Qyrus app. Copy the team name and paste it.
      is_required: true
  - qyrus_project_name:
    opts:
      title: "Qyrus Project Name"
      summary: Enter the project name
      description: |
        Project name you can find by logging into Qyrus app. Copy the team name and paste it.
      is_required: true
  - qyrus_suite_name:
    opts:
      title: "Qyrus Suite Name"
      summary: Enter the project name
      description: |
        Suite name you can find by logging into Qyrus app. Copy the team name and paste it.
      is_required: true
  - app_activity:
    opts:
      title: "App Activity"
      summary: Enter your android app activity
      description: |
        Enter android app activity which will be in the form of com.example.splash_screen
      is_required: false
  - bundle_id:
    opts:
      title: "Bundle Id"
      summary: Enter your iOS app bundle id
      description: |
        Enter iOS app bundleId which will be in the form of com.example.splash_screen
      is_required: false
  - device_pool_name:
    opts:
      title: "device_pool_name"
      summary: Enter device pool name created on Qyrus
      description: |
        Specify your device pool name which you created on Qyrus,
        a device pool will have list of devices added and a test
        run will happen on a device from the pool.
      is_required: true
  - email_id:
    opts:
      title: "emailId"
      summary: Enter the EmailId
      description: |
        Enter Your EmailId To Send Your Test Reports.
      is_required: true    
outputs:
  - QYRUS_TEST_REPORT_URL: null
    opts:
      description: |
        The output of test is the report URL which can be used
        to download and analyse the test steps
      summary: Its the report download URL
      title: Qyrus report download url